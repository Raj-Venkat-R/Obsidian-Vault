---
title: 560 - Subarray Sum Equals K
difficulty: Medium
pattern: Prefix Sum + HashMap
status: Solved
---

## ðŸ”¹ Problem Summary
Given an integer array `nums` and an integer `k`, return the total number of **continuous subarrays** whose sum equals `k`.

---

## ðŸ”¹ Key Observation
If:
- `currSum` = prefix sum till index `i`
- `prevSum` = prefix sum till index `j`

Then the subarray `(j+1 â†’ i)` has sum `k` **iff**:
```
currSum - prevSum = k
â‡’ prevSum = currSum - k
```

So for every index, we only need to know:
> how many times `(currSum - k)` has appeared before.

---

## ðŸ”¹ Final Approach (Step-by-Step in English)

1. Use a HashMap to store  
   `prefixSum â†’ frequency`
2. Initialize:
   - `currSum = 0`
   - `result = 0`
   - put `(0 â†’ 1)` in map  
     (handles subarrays starting from index 0)
3. Traverse the array:
   - Add current element to `currSum`
   - Compute `key = currSum - k`
   - If `key` exists in map:
     - add its frequency to `result`
   - Update frequency of `currSum` in map
4. Return `result`

---

## ðŸ”¹ Example Walkthrough
Input:
```
nums = [1, 2, 3]
k = 3
```

Process:
- prefix sums: `1, 3, 6`
- valid subarrays:
  - `[1,2]`
  - `[3]`

Final Output:
```
2
```

---

## ðŸ”¹ Java Code (Final)
```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        Map<Integer, Integer> freq = new HashMap<>();
        int currsum = 0;
        int res = 0;
        freq.put(0, 1);

        for (int i = 0; i < nums.length; i++) {
            currsum += nums[i];
            int key = currsum - k;
            res += freq.containsKey(key) ? freq.get(key) : 0;
            freq.put(currsum, freq.getOrDefault(currsum, 0) + 1);
        }
        return res;
    }
}
```

---

## ðŸ”¹ Time & Space Complexity
- **Time:** `O(n)`
- **Space:** `O(n)`

---

## ðŸ”¹ Patterns Learned
- Prefix Sum
- HashMap frequency counting
- Works with **negative numbers** (unlike sliding window)

---

## ðŸ”¹ Common Mistakes to Avoid
- Using `k - currSum` instead of `currSum - k`
- Overwriting `result` instead of adding to it
- Forgetting `freq.put(0, 1)`
- Trying sliding window (fails with negatives)
