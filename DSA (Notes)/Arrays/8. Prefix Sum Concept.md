---
title: Arrays â€“ Prefix Sum Concept
topic: Data Structures
subtopic: Arrays
order: 7
purpose: Optimize Range Calculations
---

# Prefix Sum Concept

Prefix Sum is an **optimization technique** used to **avoid repeated work** in array problems.

---

## ğŸ”¹ Why Prefix Sum Exists

Brute force often does this:
- Recalculate sum for the same range again and again

Prefix sum:
> Stores partial results so future calculations are instant.

---

## ğŸ”¹ What is Prefix Sum?

A **prefix sum array** stores:
> The sum of elements from index `0` to index `i`

Definition:
```
prefix[i] = arr[0] + arr[1] + ... + arr[i]
```

---

## ğŸ”¹ Example

Original array:
```
arr â†’ [ 2, 4, 6, 8 ]
```

Prefix sum array:
```
prefix â†’ [ 2, 6, 12, 20 ]
Index     0  1   2   3
```

---

## ğŸ”¹ How Prefix Sum is Built (Concept)

Step-by-step:
1. `prefix[0] = arr[0]`
2. `prefix[i] = prefix[i-1] + arr[i]`

Diagram:
```
prefix[2] = prefix[1] + arr[2]
          = 6 + 6
          = 12
```

---

## ğŸ”¹ Range Sum Using Prefix Sum

To find sum from index `l` to `r`:

### Case 1: `l == 0`
```
sum = prefix[r]
```

### Case 2: `l > 0`
```
sum = prefix[r] - prefix[l - 1]
```

---

## ğŸ”¹ Example (Range Sum)

Array:
```
arr â†’ [ 2, 4, 6, 8 ]
prefix â†’ [ 2, 6, 12, 20 ]
```

Find sum from index `1` to `3`:
```
sum = prefix[3] - prefix[0]
    = 20 - 2
    = 18
```

Which equals:
```
4 + 6 + 8 = 18
```

---

## ğŸ”¹ Why This is Powerful

Without prefix sum:
- You loop again and again

With prefix sum:
- One-time preprocessing
- Range sum in constant time

This drastically improves performance.

---

## ğŸ”¹ Prefix Sum vs Brute Force

| Approach | Work Done |
|-------|----------|
| Brute force | Repeated summation |
| Prefix sum | Precompute once |

---

## ğŸ”¹ Common Use Cases

Prefix sum is useful when:
- Multiple range queries
- Subarray sum problems
- Frequency/range counting
- Difference of ranges

---

## ğŸ”¹ Common Pitfalls

- Forgetting `l == 0` case
- Off-by-one errors
- Confusing prefix indices
- Modifying original array mistakenly

---

## ğŸ”¹ Prefix Sum is NOT Only for Sums

Prefix idea applies to:
- Counts
- Frequencies
- XOR
- Even difference arrays

The **idea** matters more than the operation.

---

## ğŸ”¹ Core Mental Model (LOCK THIS)

> **Prefix sum converts repeated work into one-time work**

If a problem asks:
- â€œsum from l to r many timesâ€  
â†’ Think **prefix sum**

---

## Topic Completed
âœ” What prefix sum is  
âœ” How it works  
âœ” Range sum formula  
âœ” Why it optimizes brute force  


